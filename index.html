<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Warda Kumush - Handcrafted Elegance</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    /* (your original CSS ‚Äî unchanged) */
    body {
      box-sizing: border-box;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow-x: hidden; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #fef5e7; color: #2c2c2c; line-height: 1.6; }
    /* ... (rest of your CSS omitted in this snippet for brevity) ... */
    /* Be sure to keep the full CSS from your original file here */
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Opening Animation -->
  <div class="opening-overlay">
   <h1 class="opening-logo">Warda Kumush</h1>
  </div>
  <div class="particles" id="particles"></div>
  <div class="main-wrapper main-content">
   <header>
    <div class="header-top">
     <div class="header-top-content">
      <div class="contact-info"><a href="tel:+917668112278" class="contact-link"> <span>üìû</span> <span>+91 76681 12278</span> </a> <a href="https://wa.me/917668112278" target="_blank" rel="noopener noreferrer" class="contact-link"> <span>üí¨</span> <span>WhatsApp Us</span> </a>
      </div>
      <div class="tagline" id="tagline">
       Handcrafted Elegance in Every Stitch
      </div>
     </div>
    </div>
    <div class="header-main">
     <div class="header-main-content">
      <div class="logo-section">
       <h1 class="logo" id="company-name">Warda Kumush</h1>
      </div>
      <div class="header-actions">
       <div id="user-section" style="display: none;">
        <div class="user-info"><span>üë§</span> <span class="user-name" id="user-display-name">Guest</span> <button class="logout-btn" id="logout-btn">Logout</button>
        </div>
       </div>
       <div id="auth-buttons"><button class="action-button" id="signin-btn"> <span>üîê</span> <span>Sign In</span> </button> <button class="action-button secondary" id="signup-btn"> <span>‚ú®</span> <span>Sign Up</span> </button>
       </div><button class="cart-button" id="open-cart"> <span>üõí</span> <span>Cart</span> <span class="cart-count" id="cart-count">0</span> </button>
      </div>
     </div>
    </div>
   </header>
   <div class="content-wrapper">
    <!-- (Your page content unchanged - about/products/contact) -->
    <section class="about-section">
     <h2 class="about-title" id="about-title">Our Craft</h2>
     <p class="about-description" id="about-description">At Warda Kumush, we create beautiful and elegant handmade soft products with love and precision. Each piece is carefully crafted using traditional crochet techniques, bringing warmth and sophistication to your life. Our collection features exquisite handmade items that combine artistry with comfort.</p>
    </section>
    <!-- ... rest of page content unchanged ... -->
   </div>
   <footer>
    <p>¬© 2024 Warda Kumush. All rights reserved.</p>
   </footer>
  </div>

  <!-- Auth Modal -->
  <div class="auth-modal" id="auth-modal">
   <div class="auth-content"><button class="close-auth" id="close-auth">√ó</button>
    <div class="auth-header">
     <h2>Welcome! üåü</h2>
     <p>Join us for a personalized shopping experience</p>
    </div>
    <div class="auth-tabs">
     <div class="auth-tab active" id="signin-tab">Sign In</div>
     <div class="auth-tab" id="signup-tab">Sign Up</div>
    </div>
    <div class="message-box error-message" id="auth-error"></div>
    <div class="message-box success-message-auth" id="auth-success"></div>

    <!-- Sign In Form -->
    <form class="auth-form active" id="signin-form">
     <div class="form-group"><label for="signin-email">Email Address</label> <input type="email" id="signin-email" required placeholder="your@email.com"></div>
     <div class="form-group"><label for="signin-password">Password</label> <input type="password" id="signin-password" required placeholder="Enter your password"></div>
     <div class="form-actions"><button type="submit" class="submit-order">Sign In</button></div>
    </form>

    <!-- Sign Up Form -->
    <form class="auth-form" id="signup-form">
     <div class="form-group"><label for="signup-name">Full Name</label> <input type="text" id="signup-name" required placeholder="Enter your full name"></div>
     <div class="form-group"><label for="signup-email">Email Address</label> <input type="email" id="signup-email" required placeholder="your@email.com"></div>
     <div class="form-group"><label for="signup-phone">Phone Number</label> <input type="tel" id="signup-phone" required placeholder="+91 XXXXX XXXXX"></div>
     <div class="form-group"><label for="signup-password">Password</label> <input type="password" id="signup-password" required placeholder="Create a password" minlength="6"></div>
     <div class="form-group"><label for="signup-confirm-password">Confirm Password</label> <input type="password" id="signup-confirm-password" required placeholder="Confirm your password" minlength="6"></div>
     <div class="form-actions"><button type="submit" class="submit-order">Create Account</button></div>
    </form>
   </div>
  </div>

  <!-- Cart Modal & rest of page markup unchanged (keep original) -->
  <!-- ... (cart modal, checkout forms, toast) ... -->

  <div class="toast-notification" id="toast-notification"><span>‚úì</span> <span id="toast-message">Added to cart!</span></div>

  <script>
    /***********************
     * app config + helpers
     ***********************/
    const defaultConfig = {
      background_color: "#fef5e7",
      surface_color: "#fff8e7",
      text_color: "#2c2c2c",
      primary_action_color: "#d4af37",
      secondary_action_color: "#8b4513",
      company_name: "Warda Kumush",
      tagline: "Handcrafted Elegance in Every Stitch",
      about_title: "Our Craft",
      about_description: "At Warda Kumush, we create beautiful and elegant handmade soft products with love and precision. Each piece is carefully crafted using traditional crochet techniques, bringing warmth and sophistication to your life. Our collection features exquisite handmade items that combine artistry with comfort.",
      products_title: "Featured Collection",
      product1_name: "Handmade Bracelet",
      product1_description: "Delicately crafted crochet bracelets that add a touch of elegance to any outfit. Each bracelet is a unique piece of wearable art.",
      product2_name: "Handmade Roses",
      product2_description: "Beautiful crochet roses that last forever. Perfect for gifting or decorating your space with timeless elegance and charm.",
      contact_title: "Get In Touch",
      manager_label: "Managed By",
      manager_name: "Maher Alam",
      proprietor_label: "Proprietor",
      proprietor_name: "Alish Parveen",
      address_label: "Address",
      address: "Bakshiwala Road, Bukhara, Bijnor 246701",
      phone_label: "Contact",
      phone_number: "+91 76681 12278",
      buy_now_button: "Buy Now"
    };

    // small UI helpers
    function showToast(message) {
      const toast = document.getElementById('toast-notification');
      document.getElementById('toast-message').textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }
    function showError(message) {
      const errorDiv = document.getElementById('auth-error');
      errorDiv.textContent = message;
      errorDiv.classList.add('show');
      document.getElementById('auth-success').classList.remove('show');
      setTimeout(() => errorDiv.classList.remove('show'), 4000);
    }
    function showSuccess(message) {
      const successDiv = document.getElementById('auth-success');
      successDiv.textContent = message;
      successDiv.classList.add('show');
      document.getElementById('auth-error').classList.remove('show');
      setTimeout(() => successDiv.classList.remove('show'), 3000);
    }

    /***********************
     * data sdk init (unchanged)
     ***********************/
    let allUsers = [];
    const dataHandler = { onDataChanged(data) { allUsers = data; } };
    async function initDataSDK() {
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) console.error("Failed to initialize data SDK");
      }
    }
    initDataSDK();

    /***********************
     * particles (unchanged)
     ***********************/
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 30;
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();

    /***********************
     * Cart logic (unchanged)
     ***********************/
    let cart = [];
    const products = [
      { id: 1, name: 'Handmade Bracelet' },
      { id: 2, name: 'Handmade Roses' },
      { id: 3, name: 'Parandi' },
      { id: 4, name: 'Scrunchies' },
      { id: 5, name: 'Bangle' },
      { id: 6, name: 'Crochet Mirror Keychain' },
      { id: 7, name: 'Gajra' }
    ];
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) existingItem.quantity += 1;
      else cart.push({ ...product, quantity: 1 });
      updateCartUI();
      showToast('Added to cart!');
    }
    function updateCartCounter() {
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').textContent = totalItems;
    }
    function updateCartUI() {
      updateCartCounter();
      renderCartItems();
    }
    function renderCartItems() {
      const container = document.getElementById('cart-items-container');
      const summary = document.getElementById('cart-summary');
      if (!container) return;
      if (cart.length === 0) {
        container.innerHTML = '<div class="cart-empty">Your cart is empty</div>';
        if (summary) summary.style.display = 'none';
        return;
      }
      container.innerHTML = cart.map(item => `
        <div class="cart-item">
          <div class="cart-item-info">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-quantity">
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">‚àí</button>
              <span class="quantity-number">${item.quantity}</span>
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
            </div>
          </div>
          <button class="remove-item" onclick="removeFromCart(${item.id})">Remove</button>
        </div>
      `).join('');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const totalItemsEl = document.getElementById('total-items');
      if (totalItemsEl) totalItemsEl.textContent = totalItems;
      if (summary) summary.style.display = 'block';
    }
    window.updateQuantity = function(productId, change) {
      const item = cart.find(item => item.id === productId);
      if (!item) return;
      item.quantity += change;
      if (item.quantity <= 0) removeFromCart(productId);
      else updateCartUI();
    };
    window.removeFromCart = function(productId) {
      cart = cart.filter(item => item.id !== productId);
      updateCartUI();
    };

    // cart modal handlers (unchanged)
    document.getElementById('open-cart')?.addEventListener('click', () => document.getElementById('cart-modal')?.classList.add('active'));
    document.getElementById('close-cart')?.addEventListener('click', () => document.getElementById('cart-modal')?.classList.remove('active'));
    document.getElementById('cart-modal')?.addEventListener('click', (e) => { if (e.target.id === 'cart-modal') document.getElementById('cart-modal')?.classList.remove('active'); });

    document.getElementById('checkout-button')?.addEventListener('click', function() {
      if (cart.length === 0) return;
      document.getElementById('cart-view').style.display = 'none';
      document.getElementById('checkout-form').classList.add('active');
      const summaryContainer = document.getElementById('order-summary-items');
      const orderItems = cart.map(item => `<div class="order-item"><span>${item.name}</span><span>Qty: ${item.quantity}</span></div>`).join('');
      const totalItems = cart.reduce((s, i) => s + i.quantity, 0);
      if (summaryContainer) summaryContainer.innerHTML = orderItems + `<div class="order-item"><span>Total Items:</span><span>${totalItems}</span></div>`;
      if (getSessionUser()) {
        const s = getSessionUser();
        document.getElementById('full-name').value = s.full_name || '';
        document.getElementById('email').value = s.email || '';
        document.getElementById('phone').value = s.phone || '';
      }
    });

    document.getElementById('back-to-cart')?.addEventListener('click', () => {
      document.getElementById('checkout-form').classList.remove('active');
      document.getElementById('cart-view').style.display = 'block';
    });
    document.getElementById('close-checkout')?.addEventListener('click', () => {
      document.getElementById('cart-modal').classList.remove('active');
      document.getElementById('checkout-form').classList.remove('active');
      document.getElementById('cart-view').style.display = 'block';
    });

    document.getElementById('checkout-form-element')?.addEventListener('submit', function(e) {
      e.preventDefault();
      const submitBtn = this.querySelector('.submit-order');
      if (submitBtn) { submitBtn.disabled = true; submitBtn.textContent = 'Processing...'; }
      const formData = {
        fullName: document.getElementById('full-name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address-field').value,
        city: document.getElementById('city').value,
        pincode: document.getElementById('pincode').value,
        state: document.getElementById('state').value,
        notes: document.getElementById('notes').value,
        items: cart.map(item => `${item.name} (Qty: ${item.quantity})`).join(', '),
        totalItems: cart.reduce((sum, item) => sum + item.quantity, 0),
        paymentMethod: 'Cash on Delivery (COD)',
        orderDate: new Date().toLocaleString(),
        userId: getSessionUser() ? getSessionUser().email : 'guest'
      };
      console.log('Order placed:', formData);
      setTimeout(() => {
        document.getElementById('checkout-form').classList.remove('active');
        document.getElementById('success-message').classList.add('active');
        cart = [];
        updateCartUI();
        this.reset();
        if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = 'Place Order'; }
      }, 1000);
    });

    document.getElementById('close-success')?.addEventListener('click', function() {
      document.getElementById('success-message').classList.remove('active');
      document.getElementById('cart-modal').classList.remove('active');
      document.getElementById('cart-view').style.display = 'block';
    });

    // buy buttons
    ['buy-button-1','buy-button-2','buy-button-3','buy-button-4','buy-button-5','buy-button-6','buy-button-7'].forEach((id, idx) => {
      document.getElementById(id)?.addEventListener('click', () => addToCart(idx+1));
    });

    /***********************
     * LocalStorage Auth + Session
     ***********************/

    // hashing utility
    async function sha256Hex(str) {
      const encoder = new TextEncoder();
      const data = encoder.encode(str);
      const hash = await crypto.subtle.digest('SHA-256', data);
      const bytes = Array.from(new Uint8Array(hash));
      return bytes.map(b => b.toString(16).padStart(2,'0')).join('');
    }

    // local users storage
    const LS_KEY = 'warda_users_v1';
    function loadUsersFromLocal() {
      try { return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); }
      catch (e) { console.error('loadUsers error', e); return []; }
    }
    function saveUsersToLocal(users) {
      try { localStorage.setItem(LS_KEY, JSON.stringify(users)); }
      catch (e) { console.error('saveUsers error', e); }
    }

    async function createUserLocal({ full_name, email, phone, password }) {
      const users = loadUsersFromLocal();
      const emailLower = (email || '').toLowerCase();
      if (users.find(u => u.email === emailLower)) return { ok: false, error: 'User already exists' };
      const password_hash = await sha256Hex(password);
      const user = { full_name, email: emailLower, phone: phone || '', password_hash, created_at: new Date().toISOString() };
      users.push(user);
      saveUsersToLocal(users);
      return { ok: true, user };
    }

    async function signInLocal(email, password) {
      const users = loadUsersFromLocal();
      const emailLower = (email || '').toLowerCase();
      const password_hash = await sha256Hex(password);
      const user = users.find(u => u.email === emailLower && u.password_hash === password_hash);
      if (!user) return { ok: false, error: 'Invalid credentials' };
      return { ok: true, user };
    }

    /* Session helpers */
    const SESSION_KEY = 'warda_session_v1';
    function setSessionUser(user) {
      try {
        const session = { email: user.email, full_name: user.full_name, phone: user.phone || '', created_at: user.created_at || new Date().toISOString() };
        localStorage.setItem(SESSION_KEY, JSON.stringify(session));
      } catch (e) { console.error('setSessionUser', e); }
    }
    function clearSession() {
      try { localStorage.removeItem(SESSION_KEY); } catch (e) { console.error('clearSession', e); }
    }
    function getSessionUser() {
      try { return JSON.parse(localStorage.getItem(SESSION_KEY)); } catch (e) { return null; }
    }

    /* UI update helpers used by auth */
    function updateUIForUser(user) {
      document.getElementById('user-display-name').textContent = user.full_name || 'User';
      document.getElementById('user-section').style.display = 'block';
      document.getElementById('auth-buttons').style.display = 'none';
      // prefill checkout
      document.getElementById('full-name').value = user.full_name || '';
      document.getElementById('email').value = user.email || '';
      document.getElementById('phone').value = user.phone || '';
    }
    function updateUIForGuest() {
      document.getElementById('user-section').style.display = 'none';
      document.getElementById('auth-buttons').style.display = 'flex';
      document.getElementById('full-name').value = '';
      document.getElementById('email').value = '';
      document.getElementById('phone').value = '';
    }

    /* Install single enhanced auth handlers (signup + signin + session + logout) */
    (function installLocalAuthHandlersWithSession(){
      const signupForm = document.getElementById('signup-form');
      const signinForm = document.getElementById('signin-form');

      if (signupForm) {
        signupForm.addEventListener('submit', async function(e){
          e.preventDefault();
          const name = document.getElementById('signup-name').value.trim();
          const email = document.getElementById('signup-email').value.trim().toLowerCase();
          const phone = document.getElementById('signup-phone').value.trim();
          const password = document.getElementById('signup-password').value;
          const confirm = document.getElementById('signup-confirm-password').value;
          if (!name || !email || !password) { showError('Please fill required fields'); return; }
          if (password !== confirm) { showError('Passwords do not match!'); return; }
          if (password.length < 6) { showError('Password must be at least 6 characters long!'); return; }

          const btn = this.querySelector('button[type="submit"]');
          if (btn) { btn.disabled = true; btn.textContent = 'Creating Account...'; }
          const res = await createUserLocal({ full_name: name, email, phone, password });
          if (btn) { btn.disabled = false; btn.textContent = 'Create Account'; }

          if (res.ok) {
            // Auto-login after successful signup
            setSessionUser(res.user);
            showSuccess('Account created and signed in!');
            updateUIForUser({ full_name: res.user.full_name, email: res.user.email, phone: res.user.phone });
            this.reset();
            setTimeout(()=> document.getElementById('auth-modal').classList.remove('active'), 700);
          } else {
            showError(res.error || 'Failed to create account');
          }
        });
      }

      if (signinForm) {
        signinForm.addEventListener('submit', async function(e){
          e.preventDefault();
          const email = document.getElementById('signin-email').value.trim().toLowerCase();
          const password = document.getElementById('signin-password').value;
          if (!email || !password) { showError('Enter email and password'); return; }

          const btn = this.querySelector('button[type="submit"]');
          if (btn) { btn.disabled = true; btn.textContent = 'Signing in...'; }
          const res = await signInLocal(email, password);
          if (btn) { btn.disabled = false; btn.textContent = 'Sign In'; }

          if (res.ok) {
            setSessionUser(res.user);
            showSuccess('Welcome back!');
            updateUIForUser({ full_name: res.user.full_name, email: res.user.email, phone: res.user.phone });
            setTimeout(()=> document.getElementById('auth-modal').classList.remove('active'), 700);
            this.reset();
          } else {
            showError('Invalid email or password!');
          }
        });
      }

      // attach logout (this clears session)
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          clearSession();
          updateUIForGuest();
          showToast('Logged out successfully!');
        });
      }

      // initialize UI from session on page load
      (function initAuthFromSession() {
        const session = getSessionUser();
        if (session && session.email) {
          updateUIForUser({ full_name: session.full_name, email: session.email, phone: session.phone });
        } else {
          updateUIForGuest();
        }
      })();

      // tab switching and modal controls (kept here so auth modal works)
      document.getElementById('signin-btn')?.addEventListener('click', () => { document.getElementById('auth-modal')?.classList.add('active'); document.getElementById('signin-tab')?.click(); });
      document.getElementById('signup-btn')?.addEventListener('click', () => { document.getElementById('auth-modal')?.classList.add('active'); document.getElementById('signup-tab')?.click(); });
      document.getElementById('close-auth')?.addEventListener('click', () => document.getElementById('auth-modal')?.classList.remove('active'));
      document.getElementById('auth-modal')?.addEventListener('click', function(e) { if (e.target.id === 'auth-modal') document.getElementById('auth-modal')?.classList.remove('active'); });

      document.getElementById('signin-tab')?.addEventListener('click', function() {
        this.classList.add('active'); document.getElementById('signup-tab')?.classList.remove('active');
        document.getElementById('signin-form')?.classList.add('active'); document.getElementById('signup-form')?.classList.remove('active');
        document.getElementById('auth-error')?.classList.remove('show'); document.getElementById('auth-success')?.classList.remove('show');
      });
      document.getElementById('signup-tab')?.addEventListener('click', function() {
        this.classList.add('active'); document.getElementById('signin-tab')?.classList.remove('active');
        document.getElementById('signup-form')?.classList.add('active'); document.getElementById('signin-form')?.classList.remove('active');
        document.getElementById('auth-error')?.classList.remove('show'); document.getElementById('auth-success')?.classList.remove('show');
      });

    })(); // end enhanced auth installer
  </script>

  <!-- elementSdk / onConfigChange code (unchanged) -->
  <script>
    async function onConfigChange(config) {
      // Update all text content - keep same mapping as before
      document.getElementById('company-name').textContent = config.company_name || defaultConfig.company_name;
      document.getElementById('tagline').textContent = config.tagline || defaultConfig.tagline;
      document.getElementById('about-title').textContent = config.about_title || defaultConfig.about_title;
      document.getElementById('about-description').textContent = config.about_description || defaultConfig.about_description;
      document.getElementById('products-title').textContent = config.products_title || defaultConfig.products_title;
      document.getElementById('product1-name').textContent = config.product1_name || defaultConfig.product1_name;
      document.getElementById('product1-description').textContent = config.product1_description || defaultConfig.product1_description;
      document.getElementById('product2-name').textContent = config.product2_name || defaultConfig.product2_name;
      document.getElementById('product2-description').textContent = config.product2_description || defaultConfig.product2_description;
      document.getElementById('contact-title').textContent = config.contact_title || defaultConfig.contact_title;
      document.getElementById('manager-label').textContent = config.manager_label || defaultConfig.manager_label;
      document.getElementById('manager-name').textContent = config.manager_name || defaultConfig.manager_name;
      document.getElementById('proprietor-label').textContent = config.proprietor_label || defaultConfig.proprietor_label;
      document.getElementById('proprietor-name').textContent = config.proprietor_name || defaultConfig.proprietor_name;
      document.getElementById('address-label').textContent = config.address_label || defaultConfig.address_label;
      document.getElementById('address').textContent = config.address || defaultConfig.address;
      document.getElementById('phone-label').textContent = config.phone_label || defaultConfig.phone_label;
      document.getElementById('phone-number').textContent = config.phone_number || defaultConfig.phone_number;
      document.getElementById('buy-now-button').textContent = config.buy_now_button || defaultConfig.buy_now_button;

      // Update colors
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = backgroundColor;
      document.body.style.color = textColor;
      document.querySelector('.logo').style.color = primaryActionColor;
      document.querySelectorAll('.about-title, .section-title, .product-name, .small-product-name').forEach(el => el.style.color = textColor);
      document.querySelectorAll('.buy-button, .small-buy-button, .checkout-button').forEach(btn => btn.style.background = primaryActionColor);
      document.querySelectorAll('.action-button').forEach(btn => {
        if (btn.classList.contains('secondary')) btn.style.background = secondaryActionColor;
        else btn.style.background = primaryActionColor;
      });
      document.querySelector('.contact-section').style.background = secondaryActionColor;
      document.querySelector('footer').style.background = secondaryActionColor;
      document.querySelector('.header-top').style.background = secondaryActionColor;
      document.querySelector('.cart-button').style.background = secondaryActionColor;
      document.querySelectorAll('.cart-total, .payment-method').forEach(el => el.style.background = secondaryActionColor);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            { get: () => config.background_color || defaultConfig.background_color, set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); } },
            { get: () => config.surface_color || defaultConfig.surface_color, set: (value) => { config.surface_color = value; window.elementSdk.setConfig({ surface_color: value }); } },
            { get: () => config.text_color || defaultConfig.text_color, set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); } },
            { get: () => config.primary_action_color || defaultConfig.primary_action_color, set: (value) => { config.primary_action_color = value; window.elementSdk.setConfig({ primary_action_color: value }); } },
            { get: () => config.secondary_action_color || defaultConfig.secondary_action_color, set: (value) => { config.secondary_action_color = value; window.elementSdk.setConfig({ secondary_action_color: value }); } }
          ],
          borderables: [], fontEditable: undefined, fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["company_name", config.company_name || defaultConfig.company_name],
          ["tagline", config.tagline || defaultConfig.tagline],
          ["about_title", config.about_title || defaultConfig.about_title],
          ["about_description", config.about_description || defaultConfig.about_description],
          ["products_title", config.products_title || defaultConfig.products_title],
          ["product1_name", config.product1_name || defaultConfig.product1_name],
          ["product1_description", config.product1_description || defaultConfig.product1_description],
          ["product2_name", config.product2_name || defaultConfig.product2_name],
          ["product2_description", config.product2_description || defaultConfig.product2_description],
          ["contact_title", config.contact_title || defaultConfig.contact_title],
          ["manager_label", config.manager_label || defaultConfig.manager_label],
          ["manager_name", config.manager_name || defaultConfig.manager_name],
          ["proprietor_label", config.proprietor_label || defaultConfig.proprietor_label],
          ["proprietor_name", config.proprietor_name || defaultConfig.proprietor_name],
          ["address_label", config.address_label || defaultConfig.address_label],
          ["address", config.address || defaultConfig.address],
          ["phone_label", config.phone_label || defaultConfig.phone_label],
          ["phone_number", config.phone_number || defaultConfig.phone_number],
          ["buy_now_button", config.buy_now_button || defaultConfig.buy_now_button]
        ])
      });
    }
  </script>

 </body>
</html>
