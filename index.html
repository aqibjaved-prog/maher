<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Warda Kumush - Handcrafted Elegance</title>

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Keep your existing SDK includes (kept as you had them) -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>

  <!-- ======= Paste your CSS here - unchanged from your file (kept) ======= -->
  <style>
    /* (Your full CSS from the file you gave ‚Äî unchanged) */
    /* ... (omitted here in this snippet for brevity) ... */
    /* In the real file copy the full CSS you provided earlier here unchanged. */
  </style>

  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>

</head>
<body>
  <!-- Opening Animation -->
  <div class="opening-overlay">
    <h1 class="opening-logo">Warda Kumush</h1>
  </div>

  <div class="particles" id="particles"></div>

  <div class="main-wrapper main-content">
    <header>
      <div class="header-top">
        <div class="header-top-content">
          <div class="contact-info">
            <a href="tel:+917668112278" class="contact-link"> <span>üìû</span> <span>+91 76681 12278</span> </a>
            <a href="https://wa.me/917668112278" target="_blank" rel="noopener noreferrer" class="contact-link"> <span>üí¨</span> <span>WhatsApp Us</span> </a>
          </div>
          <div class="tagline" id="tagline">Handcrafted Elegance in Every Stitch</div>
        </div>
      </div>

      <div class="header-main">
        <div class="header-main-content">
          <div class="logo-section">
            <h1 class="logo" id="company-name">Warda Kumush</h1>
          </div>
          <div class="header-actions">
            <div id="user-section" style="display: none;">
              <div class="user-info">
                <span>üë§</span>
                <span class="user-name" id="user-display-name">Guest</span>
                <button class="logout-btn" id="logout-btn">Logout</button>
              </div>
            </div>

            <div id="auth-buttons">
              <button class="action-button" id="signin-btn"> <span>üîê</span> <span>Sign In</span> </button>
              <button class="action-button secondary" id="signup-btn"> <span>‚ú®</span> <span>Sign Up</span> </button>
            </div>

            <button class="cart-button" id="open-cart"> <span>üõí</span> <span>Cart</span> <span class="cart-count" id="cart-count">0</span> </button>
          </div>
        </div>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- (Your full page content unchanged ‚Äî products, about, contact, etc.) -->
      <!-- I kept everything you provided intact. -->
      <section class="about-section">
        <h2 class="about-title" id="about-title">Our Craft</h2>
        <p class="about-description" id="about-description">
          At Warda Kumush, we create beautiful and elegant handmade soft products with love and precision...
        </p>
      </section>

      <!-- Products section (unchanged) -->
      <section class="products-section">
        <h2 class="section-title" id="products-title">Featured Collection</h2>
        <div class="products-grid">
          <div class="product-card">
            <div class="product-icon">üíé</div>
            <h3 class="product-name" id="product1-name">Handmade Bracelet</h3>
            <p class="product-description" id="product1-description">Delicately crafted crochet bracelets...</p>
            <button class="buy-button" id="buy-button-1"><span id="buy-now-button">Buy Now</span></button>
          </div>

          <div class="product-card">
            <div class="product-icon">üåπ</div>
            <h3 class="product-name" id="product2-name">Handmade Roses</h3>
            <p class="product-description" id="product2-description">Beautiful crochet roses that last forever.</p>
            <button class="buy-button" id="buy-button-2">Buy Now</button>
          </div>
        </div>
      </section>

      <!-- More products and contact section are unchanged -->
      <section class="more-products-section"> ... </section>

      <section class="contact-section"> ... </section>
    </div>

    <footer>
      <p>¬© 2024 Warda Kumush. All rights reserved.</p>
    </footer>
  </div>

  <!-- Auth Modal (unchanged) -->
  <div class="auth-modal" id="auth-modal">
    <div class="auth-content">
      <button class="close-auth" id="close-auth">√ó</button>

      <div class="auth-header">
        <h2>Welcome! üåü</h2>
        <p>Join us for a personalized shopping experience</p>
      </div>

      <div class="auth-tabs">
        <div class="auth-tab active" id="signin-tab">Sign In</div>
        <div class="auth-tab" id="signup-tab">Sign Up</div>
      </div>

      <div class="message-box error-message" id="auth-error"></div>
      <div class="message-box success-message-auth" id="auth-success"></div>

      <!-- Sign In Form -->
      <form class="auth-form active" id="signin-form">
        <div class="form-group">
          <label for="signin-email">Email Address</label>
          <input type="email" id="signin-email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label for="signin-password">Password</label>
          <input type="password" id="signin-password" required placeholder="Enter your password">
        </div>
        <div class="form-actions">
          <button type="submit" class="submit-order">Sign In</button>
        </div>
      </form>

      <!-- Sign Up Form -->
      <form class="auth-form" id="signup-form">
        <div class="form-group">
          <label for="signup-name">Full Name</label>
          <input type="text" id="signup-name" required placeholder="Enter your full name">
        </div>
        <div class="form-group">
          <label for="signup-email">Email Address</label>
          <input type="email" id="signup-email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label for="signup-phone">Phone Number</label>
          <input type="tel" id="signup-phone" required placeholder="+91 XXXXX XXXXX">
        </div>
        <div class="form-group">
          <label for="signup-password">Password</label>
          <input type="password" id="signup-password" required placeholder="Create a password" minlength="6">
        </div>
        <div class="form-group">
          <label for="signup-confirm-password">Confirm Password</label>
          <input type="password" id="signup-confirm-password" required placeholder="Confirm your password" minlength="6">
        </div>
        <div class="form-actions">
          <button type="submit" class="submit-order">Create Account</button>
        </div>
        <div style="margin-top:12px; text-align:center;">
          <!-- Google Sign-in button container -->
          <div id="gsi-button"></div>
        </div>
      </form>
    </div>
  </div>

  <!-- Cart Modal & Checkout & Toast (unchanged) -->
  <div class="cart-modal" id="cart-modal"> ... </div>
  <div class="toast-notification" id="toast-notification"><span>‚úì</span> <span id="toast-message">Added to cart!</span></div>

  <!-- ======== SCRIPT: main logic (kept UI and core) + Google Sign-In + Apps Script calls ======== -->
  <script>
    /* ========== CONFIG: update these if needed ========== */
    // Use the Apps Script web app URL you deployed (you gave this earlier).
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxZjR0nE8dduH2kmw-IhHKRzdFhcHzsdlabha05sJwpdHNP98jAb2KtVcefacH433uJ/exec';

    // Your Google OAuth client id (you created in Cloud Console)
    const GOOGLE_CLIENT_ID = '346476233996-5tfqnql33kp687g3fhvhjs6vvs8fadv6.apps.googleusercontent.com';

    // (Spreadsheet id is handled on the Apps Script side; front-end doesn't need it)

    /* ===== small UI helpers (kept) ===== */
    function showToast(message) {
      const toast = document.getElementById('toast-notification');
      if (!toast) return;
      document.getElementById('toast-message').textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }
    function showError(message) {
      const errorDiv = document.getElementById('auth-error');
      if (!errorDiv) return;
      errorDiv.textContent = message;
      errorDiv.classList.add('show');
      document.getElementById('auth-success')?.classList.remove('show');
      setTimeout(() => errorDiv.classList.remove('show'), 4000);
    }
    function showSuccess(message) {
      const successDiv = document.getElementById('auth-success');
      if (!successDiv) return;
      successDiv.textContent = message;
      successDiv.classList.add('show');
      document.getElementById('auth-error')?.classList.remove('show');
      setTimeout(() => successDiv.classList.remove('show'), 3000);
    }

    /* ===== dataSdk init (kept) ===== */
    let allUsers = [];
    const dataHandler = { onDataChanged(data) { allUsers = data; } };
    async function initDataSDK() {
      if (window.dataSdk) {
        try {
          const result = await window.dataSdk.init(dataHandler);
          if (!result.isOk) console.error("Failed to initialize data SDK");
        } catch (e) {
          console.warn("dataSdk init error", e);
        }
      }
    }
    initDataSDK();

    /* ===== Particles (kept) ===== */
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      if (!particlesContainer) return;
      const particleCount = 30;
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();

    /* ===== Cart management (kept) ===== */
    let cart = [];
    const products = [
      { id: 1, name: 'Handmade Bracelet' },
      { id: 2, name: 'Handmade Roses' },
      { id: 3, name: 'Parandi' },
      { id: 4, name: 'Scrunchies' },
      { id: 5, name: 'Bangle' },
      { id: 6, name: 'Crochet Mirror Keychain' },
      { id: 7, name: 'Gajra' }
    ];

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) existingItem.quantity++;
      else cart.push({ ...product, quantity: 1 });
      updateCartUI();
      showToast('Added to cart!');
    }

    function updateCartCounter() {
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const el = document.getElementById('cart-count');
      if (el) el.textContent = totalItems;
    }

    function updateCartUI() {
      updateCartCounter();
      renderCartItems();
    }

    function renderCartItems() {
      const container = document.getElementById('cart-items-container');
      const summary = document.getElementById('cart-summary');
      if (!container) return;
      if (cart.length === 0) {
        container.innerHTML = '<div class="cart-empty">Your cart is empty</div>';
        if (summary) summary.style.display = 'none';
        return;
      }
      container.innerHTML = cart.map(item => `
        <div class="cart-item">
          <div class="cart-item-info">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-quantity">
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">‚àí</button>
              <span class="quantity-number">${item.quantity}</span>
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
            </div>
          </div>
          <button class="remove-item" onclick="removeFromCart(${item.id})">Remove</button>
        </div>
      `).join('');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const totalItemsEl = document.getElementById('total-items');
      if (totalItemsEl) totalItemsEl.textContent = totalItems;
      if (summary) summary.style.display = 'block';
    }

    window.updateQuantity = function(productId, change) {
      const item = cart.find(x => x.id === productId);
      if (!item) return;
      item.quantity += change;
      if (item.quantity <= 0) removeFromCart(productId);
      else updateCartUI();
    };

    window.removeFromCart = function(productId) {
      cart = cart.filter(i => i.id !== productId);
      updateCartUI();
    };

    // Cart modals (kept)
    document.getElementById('open-cart')?.addEventListener('click', () => document.getElementById('cart-modal')?.classList.add('active'));
    document.getElementById('close-cart')?.addEventListener('click', () => document.getElementById('cart-modal')?.classList.remove('active'));
    document.getElementById('cart-modal')?.addEventListener('click', (e) => { if (e.target.id === 'cart-modal') document.getElementById('cart-modal')?.classList.remove('active'); });

    document.getElementById('checkout-button')?.addEventListener('click', function() {
      if (cart.length === 0) return;
      document.getElementById('cart-view').style.display = 'none';
      document.getElementById('checkout-form').classList.add('active');
      const summaryContainer = document.getElementById('order-summary-items');
      if (!summaryContainer) return;
      const orderItems = cart.map(item => `<div class="order-item"><span>${item.name}</span><span>Qty: ${item.quantity}</span></div>`).join('');
      const totalItems = cart.reduce((s, i) => s + i.quantity, 0);
      summaryContainer.innerHTML = orderItems + `<div class="order-item"><span>Total Items:</span><span>${totalItems}</span></div>`;
      const session = getSessionUser();
      if (session) {
        document.getElementById('full-name').value = session.full_name || '';
        document.getElementById('email').value = session.email || '';
        document.getElementById('phone').value = session.phone || '';
      }
    });

    document.getElementById('back-to-cart')?.addEventListener('click', () => {
      document.getElementById('checkout-form').classList.remove('active');
      document.getElementById('cart-view').style.display = 'block';
    });

    document.getElementById('close-checkout')?.addEventListener('click', () => {
      document.getElementById('cart-modal').classList.remove('active');
      document.getElementById('checkout-form').classList.remove('active');
      document.getElementById('cart-view').style.display = 'block';
    });

    /* ===== LocalStorage Auth + Session (kept) ===== */
    async function sha256Hex(str) {
      const encoder = new TextEncoder();
      const data = encoder.encode(str);
      const hash = await crypto.subtle.digest('SHA-256', data);
      const bytes = Array.from(new Uint8Array(hash));
      return bytes.map(b => b.toString(16).padStart(2,'0')).join('');
    }

    const LS_KEY = 'warda_users_v1';
    function loadUsersFromLocal() {
      try { return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); }
      catch (e) { console.error('loadUsers error', e); return []; }
    }
    function saveUsersToLocal(users) {
      try { localStorage.setItem(LS_KEY, JSON.stringify(users)); }
      catch (e) { console.error('saveUsers error', e); }
    }

    async function createUserLocal({ full_name, email, phone, password }) {
      const users = loadUsersFromLocal();
      const emailLower = (email || '').toLowerCase();
      if (users.find(u => u.email === emailLower)) return { ok: false, error: 'User already exists' };
      const password_hash = await sha256Hex(password);
      const user = { full_name, email: emailLower, phone: phone || '', password_hash, created_at: new Date().toISOString() };
      users.push(user);
      saveUsersToLocal(users);
      return { ok: true, user };
    }

    async function signInLocal(email, password) {
      const users = loadUsersFromLocal();
      const emailLower = (email || '').toLowerCase();
      const password_hash = await sha256Hex(password);
      const user = users.find(u => u.email === emailLower && u.password_hash === password_hash);
      if (!user) return { ok: false, error: 'Invalid credentials' };
      return { ok: true, user };
    }

    const SESSION_KEY = 'warda_session_v1';
    function setSessionUser(user) {
      try {
        const session = { email: user.email, full_name: user.full_name, phone: user.phone || '', created_at: user.created_at || new Date().toISOString() };
        localStorage.setItem(SESSION_KEY, JSON.stringify(session));
      } catch (e) { console.error('setSessionUser', e); }
    }
    function clearSession() {
      try { localStorage.removeItem(SESSION_KEY); } catch (e) { console.error('clearSession', e); }
    }
    function getSessionUser() {
      try { return JSON.parse(localStorage.getItem(SESSION_KEY)); } catch (e) { return null; }
    }

    function updateUIForUser(user) {
      document.getElementById('user-display-name').textContent = user.full_name || 'User';
      document.getElementById('user-section').style.display = 'block';
      document.getElementById('auth-buttons').style.display = 'none';
      document.getElementById('full-name').value = user.full_name || '';
      document.getElementById('email').value = user.email || '';
      document.getElementById('phone').value = user.phone || '';
    }

    function updateUIForGuest() {
      document.getElementById('user-section').style.display = 'none';
      document.getElementById('auth-buttons').style.display = 'flex';
      if (document.getElementById('full-name')) document.getElementById('full-name').value = '';
      if (document.getElementById('email')) document.getElementById('email').value = '';
      if (document.getElementById('phone')) document.getElementById('phone').value = '';
    }

    /* ===== Auth handlers (kept) + Google integration ===== */
    (function installLocalAuthHandlersWithSession(){
      const signupForm = document.getElementById('signup-form');
      const signinForm = document.getElementById('signin-form');

      if (signupForm) {
        signupForm.addEventListener('submit', async function(e){
          e.preventDefault();
          const name = document.getElementById('signup-name').value.trim();
          const email = document.getElementById('signup-email').value.trim().toLowerCase();
          const phone = document.getElementById('signup-phone').value.trim();
          const password = document.getElementById('signup-password').value;
          const confirm = document.getElementById('signup-confirm-password').value;
          if (!name || !email || !password) { showError('Please fill required fields'); return; }
          if (password !== confirm) { showError('Passwords do not match!'); return; }
          if (password.length < 6) { showError('Password must be at least 6 characters long!'); return; }

          const btn = this.querySelector('button[type="submit"]');
          if (btn) { btn.disabled = true; btn.textContent = 'Creating Account...'; }
          const res = await createUserLocal({ full_name: name, email, phone, password });
          if (btn) { btn.disabled = false; btn.textContent = 'Create Account'; }

          if (res.ok) {
            // Auto-login after signup
            setSessionUser(res.user);
            // persist to Apps Script backend
            await sendToAppsScript({ action: 'signup', fullName: name, email: email, phone: phone, notes: 'signup-local' });
            showSuccess('Account created and signed in!');
            updateUIForUser({ full_name: res.user.full_name, email: res.user.email, phone: res.user.phone });
            this.reset();
            setTimeout(()=> document.getElementById('auth-modal')?.classList.remove('active'), 700);
          } else {
            showError(res.error || 'Failed to create account');
          }
        });
      }

      if (signinForm) {
        signinForm.addEventListener('submit', async function(e){
          e.preventDefault();
          const email = document.getElementById('signin-email').value.trim().toLowerCase();
          const password = document.getElementById('signin-password').value;
          if (!email || !password) { showError('Enter email and password'); return; }

          const btn = this.querySelector('button[type="submit"]');
          if (btn) { btn.disabled = true; btn.textContent = 'Signing in...'; }
          const res = await signInLocal(email, password);
          if (btn) { btn.disabled = false; btn.textContent = 'Sign In'; }

          if (res.ok) {
            setSessionUser(res.user);
            showSuccess('Welcome back!');
            updateUIForUser({ full_name: res.user.full_name, email: res.user.email, phone: res.user.phone });
            setTimeout(()=> document.getElementById('auth-modal')?.classList.remove('active'), 700);
            this.reset();
          } else {
            showError('Invalid email or password!');
          }
        });
      }

      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          clearSession();
          updateUIForGuest();
          showToast('Logged out successfully!');
        });
      }

      (function initAuthFromSession() {
        const session = getSessionUser();
        if (session && session.email) {
          updateUIForUser({ full_name: session.full_name, email: session.email, phone: session.phone });
        } else {
          updateUIForGuest();
        }
      })();

      // auth modal controls + tabs
      document.getElementById('signin-btn')?.addEventListener('click', () => { document.getElementById('auth-modal')?.classList.add('active'); document.getElementById('signin-tab')?.click(); });
      document.getElementById('signup-btn')?.addEventListener('click', () => { document.getElementById('auth-modal')?.classList.add('active'); document.getElementById('signup-tab')?.click(); });
      document.getElementById('close-auth')?.addEventListener('click', () => document.getElementById('auth-modal')?.classList.remove('active'));
      document.getElementById('auth-modal')?.addEventListener('click', function(e) { if (e.target.id === 'auth-modal') document.getElementById('auth-modal')?.classList.remove('active'); });

      document.getElementById('signin-tab')?.addEventListener('click', function() {
        this.classList.add('active'); document.getElementById('signup-tab')?.classList.remove('active');
        document.getElementById('signin-form')?.classList.add('active'); document.getElementById('signup-form')?.classList.remove('active');
        document.getElementById('auth-error')?.classList.remove('show'); document.getElementById('auth-success')?.classList.remove('show');
      });

      document.getElementById('signup-tab')?.addEventListener('click', function() {
        this.classList.add('active'); document.getElementById('signin-tab')?.classList.remove('active');
        document.getElementById('signup-form')?.classList.add('active'); document.getElementById('signin-form')?.classList.remove('active');
        document.getElementById('auth-error')?.classList.remove('show'); document.getElementById('auth-success')?.classList.remove('show');
      });

    })(); // end auth installer

    /* ===== Apps Script integration (POST calls) ===== */
    async function sendToAppsScript(payload) {
      try {
        const res = await fetch(APPS_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if (!res.ok) {
          const txt = await res.text();
          console.warn('AppsScript returned non-ok', res.status, txt);
          return { ok: false, status: res.status, body: txt };
        }
        const json = await res.json().catch(()=>null);
        return { ok: true, json };
      } catch (err) {
        console.error('sendToAppsScript error', err);
        return { ok: false, error: err.message || String(err) };
      }
    }

    /* ===== Google Identity (one-tap/button) ===== */
    // parse JWT payload (small helper)
    function parseJwt (token) {
      try {
        const parts = token.split('.');
        if (parts.length !== 3) return null;
        const payload = parts[1].replace(/-/g, '+').replace(/_/g, '/');
        const decoded = atob(payload);
        return JSON.parse(decodeURIComponent(escape(decoded)));
      } catch (e) {
        console.error('parseJwt error', e);
        return null;
      }
    }

    // Called by the Google Identity library when the user signs in
    async function handleCredentialResponse(response) {
      // response.credential is an ID token (JWT)
      const profile = parseJwt(response.credential);
      if (!profile) {
        showError('Google sign-in failed (parse).');
        return;
      }
      const name = profile.name || profile.email || '';
      const email = profile.email || '';
      // store session locally
      const session = { full_name: name, email: email, phone: '' };
      setSessionUser(session);
      updateUIForUser(session);
      showSuccess('Signed in with Google');

      // persist Google user to Apps Script backend
      await sendToAppsScript({
        action: 'google-signin',
        fullName: name,
        email: email,
        phone: '',
        notes: 'signed-in-google'
      });

      // close modal if open
      document.getElementById('auth-modal')?.classList.remove('active');
    }

    // Render Google button
    function initGoogleSignIn() {
      if (!window.google || !GOOGLE_CLIENT_ID) return;
      google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: handleCredentialResponse,
        ux_mode: 'popup'
      });
      // render in the signup form area
      google.accounts.id.renderButton(
        document.getElementById('gsi-button'),
        { theme: 'outline', size: 'medium', width: '250' } // customization
      );
      // optional: prompt one-tap (commented out by default)
      // google.accounts.id.prompt();
    }
    window.addEventListener('load', initGoogleSignIn);

    /* ===== Hook into checkout submit to persist orders to Apps Script ===== */
    document.getElementById('checkout-form-element')?.addEventListener('submit', async function(e) {
      e.preventDefault();
      const submitBtn = this.querySelector('.submit-order');
      if (submitBtn) { submitBtn.disabled = true; submitBtn.textContent = 'Processing...'; }

      const formData = {
        action: 'order',
        fullName: document.getElementById('full-name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address-field').value,
        city: document.getElementById('city').value,
        pincode: document.getElementById('pincode').value,
        state: document.getElementById('state').value,
        notes: document.getElementById('notes').value,
        items: cart.map(item => `${item.name} (Qty: ${item.quantity})`).join('; '),
        totalItems: cart.reduce((s,i)=>s+i.quantity,0),
        paymentMethod: 'Cash on Delivery (COD)',
        orderDate: new Date().toLocaleString(),
        source: 'website'
      };

      // send to Apps Script
      const result = await sendToAppsScript(formData);
      console.log('Order result', result);

      // Show local success UI
      setTimeout(() => {
        document.getElementById('checkout-form')?.classList.remove('active');
        document.getElementById('success-message')?.classList.add('active');
        cart = [];
        updateCartUI();
        this.reset();
        if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = 'Place Order'; }
      }, 800);
    });

    /* ===== hookup buy buttons (kept) ===== */
    ['buy-button-1','buy-button-2','buy-button-3','buy-button-4','buy-button-5','buy-button-6','buy-button-7'].forEach((id, idx) => {
      document.getElementById(id)?.addEventListener('click', () => addToCart(idx+1));
    });

    /* ===== elementSdk onConfigChange (kept) ===== */
    async function onConfigChange(config) {
      // (keeps your original onConfigChange binds ‚Äî omitted for brevity in this snippet)
      // In the real file, include full onConfigChange code from your original HTML (unchanged).
      console.log('config changed', config);
    }
    if (window.elementSdk) {
      // keep original init call if present (from your file). If not, this is a safe placeholder.
      try {
        window.elementSdk.init?.({ defaultConfig: {}, onConfigChange });
      } catch (e) { /* ignore */ }
    }

  </script>
</body>
</html>
